{%extends 'base.html'%}
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    {% block head %}
      <title>Session Detail</title>
    {% endblock %}
  </head>
  <body>
    {% block body %}
    <div class="jumbotron">
        <div class="card bg-light mb-3" style="max-width: 120rem;">
          <div class="card-header">Session {{ session_detail.pk}} Details</div>
          <div class="card-body">
            <!-- <h5 class="card-title"></h5> -->
            <p class="card-text">
              <!-- <p>{{session_detail.identifier}}</p> -->
              <p>Organism: {{session_detail.organism}}</p>
              <p>Genome: {{session_detail.genome}}</p>
              {% if session_detail.fasta_file %}
                <p>Genome File: {{session_detail.fasta_file}}</p>
              {% endif %}
              {% if session_detail.annotation_file %}
                <p>Annotation File: {{session_detail.annotation_file}}</p>
              {% endif %}
            </p>
          </div>
        </div>

        <!-- CONDITIONS -->
        {% if session_detail.conditions.all %}
          <p class='lead'>Session Conditions:</p>
          <table class="table mb-1 condition_table">
            <thead>
              <tr>
                <th>Key</th>
                <th>Condition</th>
                <th>Replicates</th>
                <th>Update</th>
                <th>Delete</th>
              </tr>
            </thead>
            <tbody>
                {% for condition in session_detail.conditions.all %}
                <tr>
                  <td>{{ condition.pk }}</td>
                  <td>{{ condition.conditions }}</td>
                  <td>{{ condition.no_replicates }}</td>
                  <td><a class='btn btn-sm btn-warning' href="{% url 'analysis:conditions_update' session_pk=condition.session.pk conditions_pk=condition.pk %}">Update</a></td>
                  <td><a class='btn btn-sm btn-danger' href="{% url 'analysis:conditions_delete' session_pk=condition.session.pk conditions_pk=condition.pk %}">Delete</a></td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        {% endif %}
        {% if not session_detail.conditions.all %}
          <h3>No conditions defined.</h3>
        {% endif %}
        <a class='btn btn-success' href="{% url 'analysis:conditions_create' pk=session_detail.pk %}">Add Condition</a>
<br><br>
      <!-- SAMPLES -->
      {% if samples %}
      <p class='lead'>Session Samples:</p>
      <table class="table mb-1 condition_table">
        <thead>
          <tr>
            <th>Key</th>
            <th>Condition Obj</th>
            <th>Condition</th>
            <th>Library</th>
            <th>Read 1</th>
            <th>Read 2</th>
          </tr>
        </thead>
        <tbody>
          {% for sample in samples %}
          <tr>
            <td>{{sample.pk}}</td>
            <td>{{ sample.condition }}</td>
            <td>{{ sample.condition.conditions }}</td>
            <td>{{ sample.libtype }}</td>
            <td>{{ sample.read_1 }}</td>
            <td>{{ sample.read_2 }}</td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
      {% endif %}
      {% if not samples %}
        <p>No Current Samples</p>
      {% endif %}
<br><br>
        <!-- WORKFLOW -->
        {% if session_detail.workflow.all %}
        <p class='lead'>Session Workflow:</p>
        <table class="table mb-1 condition_table">
          <thead>
            <tr>
              <th>Key</th>
              <th>Index</th>
              <th>Mapper</th>
              <th>Assembler</th>
              <th>Analysis</th>
              <th>Status</th>
              <th>Update</th>
              <th>Delete</th>
            </tr>
          </thead>
          <tbody>
            {% for workflow in session_detail.workflow.all %}
            <tr>
              <td>{{workflow.pk}}</td>
              <td>{{ workflow.index }}</td>
              <td>{{ workflow.mapper }}</td>
              <td>{{ workflow.assembler }}</td>
              <td>{{ workflow.analysis }}</td>
              <td>{{ workflow.status }}</td>
              <td><a class='btn btn-sm btn-warning' href="{% url 'analysis:workflow_update' session_pk=workflow.session.pk workflow_pk=workflow.pk %}">Update</a></td>
              <td><a class='btn btn-sm btn-danger' href="{% url 'analysis:workflow_delete' session_pk=workflow.session.pk workflow_pk=workflow.pk %}">Delete</a></td>
            </tr>
          {% endfor %}
          </tbody>
        </table>
        {% endif %}
        {% if not session_detail.workflow.all %}
          <h3>No Workflows defined.</h3>
        {% endif %}
        <a class='btn btn-success' href="{% url 'analysis:workflow_create' pk=session_detail.pk %}">Add Workflow</a>
    </div>
  {% endblock %}
  </body>
</html>






want to have a button to add samples to samples table linked to session and conditions
can use the iteration for loop within the session detail page
to extract the pk associated with that condition
should also be able to pull out from from this the condition string and pass this as a string to the crete sample funciton
